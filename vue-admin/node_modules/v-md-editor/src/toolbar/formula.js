import { formula } from '@/utils/constants/command';
import Formula from './formula.vue';

let markdownRef = null;
const handleFormula = (text, params) => {
  if (markdownRef) {
    markdownRef.insert(() => ({
      text: `\n$$${text}$$`,
    }));
    params.hide();
  }
};

export default {
  name: formula,
  icon: 'v-md-icon2-formula',
  title: '插入公式',
  action(editor) {
    markdownRef = editor
  },
  menus: {
    mode: 'render',
    item: {
      width: '500px',
      minHeight: '100px',
      render: (h, params) => (<Formula onOnFormulaClick={(e) => handleFormula(e, params)}/>),
    },
  },
};
