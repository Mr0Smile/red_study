import { inlineFormula } from '@/utils/constants/command';
import Formula from './formula.vue';

let markdownRef = null;
const handleInlineFormulaClick = (text, params) => {
  if (markdownRef) {
    markdownRef.insert(() => ({
      text: `$${text}$`,
    }));
    params.hide();
  }
};

export default {
  name: inlineFormula,
  icon: 'v-md-icon2-zu',
  title: '行内公式',
  action(editor) {
    markdownRef = editor
  },
  menus: {
    mode: 'render',
    item: {
      width: '500px',
      minHeight: '100px',
      render: (h, params) => (<Formula onOnFormulaClick={(e) => handleInlineFormulaClick(e, params)}/>),
    }
  },
};
